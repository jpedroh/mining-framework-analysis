  package      com . premiumminds . billy . portugal . test . util ;   import   java . util . Date ;  import    com . google . inject . Injector ;  import       com . premiumminds . billy . portugal . persistence . entities . PTCreditNoteEntity ;  import       com . premiumminds . billy . portugal . persistence . entities . PTCreditNoteEntryEntity ;  import       com . premiumminds . billy . portugal . persistence . entities . PTInvoiceEntity ;  import       com . premiumminds . billy . portugal . services . entities . PTCreditNote ;  import       com . premiumminds . billy . portugal . services . entities . PTCreditNoteEntry ;  import        com . premiumminds . billy . portugal . services . entities . PTGenericInvoice . SourceBilling ;  import        com . premiumminds . billy . portugal . services . entities . PTGenericInvoice . TYPE ;   public class PTCreditNoteTestUtil  {   private static final Boolean  BILLED = false ;   private static final Boolean  CANCELLED = false ;   private static final Boolean  SELFBILL = false ;   private static final String  SOURCEID = "SOURCE" ;   private Injector  injector ;   private PTCreditNoteEntryTestUtil  creditNoteEntry ;   protected PTPaymentTestUtil  payment ;   public PTCreditNoteTestUtil  (  Injector injector )  {    this . injector = injector ;    this . creditNoteEntry =  new PTCreditNoteEntryTestUtil  ( injector ) ;    this . payment =  new PTPaymentTestUtil  ( injector ) ; }   public PTCreditNoteEntity getCreditNoteEntity  (  TYPE type ,  PTInvoiceEntity reference )  {  PTCreditNoteEntity  creditNote =  ( PTCreditNoteEntity )   this . getCreditNoteBuilder  ( reference ) . build  ( ) ;   creditNote . setType  ( type ) ;  PTCreditNoteEntryEntity  creditNoteEntry =  ( PTCreditNoteEntryEntity )   creditNote . getEntries  ( ) . get  ( 0 ) ;    creditNoteEntry . getDocumentReferences  ( ) . add  ( creditNote ) ;  return creditNote ; }   public  PTCreditNote . Builder getCreditNoteBuilder  (  PTInvoiceEntity reference )  {   PTCreditNote . Builder  creditNoteBuilder =   this . injector . getInstance  (   PTCreditNote . Builder . class ) ;   PTCreditNoteEntry . Builder  creditNoteEntryBuilder =   this . creditNoteEntry . getCreditNoteEntryBuilder  ( reference ) ;  return           creditNoteBuilder . setBilled  (  PTCreditNoteTestUtil . BILLED ) . setCancelled  (  PTCreditNoteTestUtil . CANCELLED ) . setSelfBilled  (  PTCreditNoteTestUtil . SELFBILL ) . setDate  (  new Date  ( ) ) . setSourceId  (  PTCreditNoteTestUtil . SOURCEID ) . addEntry  ( creditNoteEntryBuilder ) . setBusinessUID  (   reference . getBusiness  ( ) . getUID  ( ) ) . setSourceBilling  (  SourceBilling . P ) . setCustomerUID  (   reference . getCustomer  ( ) . getUID  ( ) ) . addPayment  (   this . payment . getPaymentBuilder  ( ) ) ; }   public PTCreditNoteEntity getCreditNoteEntity  (  PTInvoiceEntity reference )  {  return  this . getCreditNoteEntity  (  TYPE . NC , reference ) ; } }